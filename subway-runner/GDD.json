{
  "game_meta": {
    "name": "地铁跑酷 Subway Runner",
    "type": "endless-runner",
    "description": "一款卡通风格的2D横版无尽跑酷游戏，玩家在城市地铁场景中奔跑，躲避障碍物并收集金币",
    "gameplay": "玩家角色自动向右奔跑，速度随时间逐渐加快。玩家通过跳跃（空格/上箭头/点击上半屏）越过低障碍物，通过滑行（下箭头/点击下半屏）穿过高障碍物。场景中随机生成三种类型的障碍物：低障碍（需跳跃）、高障碍（需滑行）、中等障碍（可跳可滑）。金币分布在跑道上，有一排、弧形等多种模式。收集金币获得分数，跑得越远分数越高。碰到任何障碍物游戏结束，显示本次分数和最高分，可重新开始。",
    "style": "cartoon",
    "difficulty": "medium",
    "players": 1,
    "controls": {
      "player1": {
        "jump": ["Space", "ArrowUp"],
        "slide": ["ArrowDown"],
        "restart": ["Enter"],
        "pause": ["Escape"]
      }
    }
  },
  "canvas": {
    "width": 960,
    "height": 540,
    "background_color": "#87CEEB",
    "background_image": "bg_city"
  },
  "layout": {
    "elements": [
      {
        "id": "background_layer",
        "type": "background",
        "x": 0,
        "y": 0,
        "width": 960,
        "height": 540,
        "z_index": 0,
        "asset_id": "bg_city"
      },
      {
        "id": "ground_layer",
        "type": "sprite",
        "x": 0,
        "y": 440,
        "width": 960,
        "height": 100,
        "z_index": 1,
        "asset_id": "ground_tile"
      },
      {
        "id": "player",
        "type": "sprite",
        "x": 150,
        "y": 340,
        "width": 60,
        "height": 100,
        "z_index": 10,
        "asset_id": "player_run"
      },
      {
        "id": "score_icon",
        "type": "icon",
        "x": 20,
        "y": 20,
        "width": 32,
        "height": 32,
        "z_index": 100,
        "asset_id": "icon_coin"
      },
      {
        "id": "score_text",
        "type": "text",
        "x": 60,
        "y": 20,
        "width": 150,
        "height": 32,
        "z_index": 100,
        "text": "0",
        "font_size": 28,
        "color": "#FFFFFF",
        "font_weight": "bold"
      },
      {
        "id": "highscore_label",
        "type": "text",
        "x": 780,
        "y": 20,
        "width": 160,
        "height": 24,
        "z_index": 100,
        "text": "BEST: 0",
        "font_size": 20,
        "color": "#FFD700",
        "font_weight": "bold"
      },
      {
        "id": "distance_text",
        "type": "text",
        "x": 400,
        "y": 20,
        "width": 160,
        "height": 28,
        "z_index": 100,
        "text": "0 m",
        "font_size": 24,
        "color": "#FFFFFF",
        "text_align": "center"
      },
      {
        "id": "speed_indicator",
        "type": "container",
        "x": 20,
        "y": 60,
        "width": 120,
        "height": 20,
        "z_index": 100,
        "asset_id": "speed_bar"
      },
      {
        "id": "touch_zone_jump",
        "type": "touch_area",
        "x": 0,
        "y": 0,
        "width": 960,
        "height": 270,
        "z_index": 50,
        "visible": false,
        "action": "jump"
      },
      {
        "id": "touch_zone_slide",
        "type": "touch_area",
        "x": 0,
        "y": 270,
        "width": 960,
        "height": 270,
        "z_index": 50,
        "visible": false,
        "action": "slide"
      }
    ]
  },
  "assets": [
    {
      "id": "bg_city",
      "type": "background",
      "width": 1920,
      "height": 540,
      "description": "卡通风格的城市天际线背景，浅蓝色天空渐变，远处有圆润可爱的摩天大楼剪影，白色蓬松云朵，明亮欢快的色调，适合横向无缝滚动",
      "style_hints": "cartoon, bright colors, rounded shapes, cheerful, parallax scrolling",
      "transparent": false,
      "placeholder": "#87CEEB",
      "render_mode": "image"
    },
    {
      "id": "ground_tile",
      "type": "sprite",
      "width": 960,
      "height": 100,
      "description": "卡通风格的地铁站台/城市街道地面，灰色石砖纹理，黄色安全线标记，边缘有圆润的站台边沿，可横向无缝平铺",
      "style_hints": "cartoon, subway platform, tileable, rounded edges",
      "transparent": false,
      "placeholder": "#5C5C5C",
      "render_mode": "image"
    },
    {
      "id": "player_run",
      "type": "animation",
      "width": 60,
      "height": 100,
      "description": "卡通风格的年轻跑酷少年，穿着蓝色连帽衫和运动裤，戴着棒球帽，动态奔跑姿势，面朝右侧，表情开朗活泼",
      "style_hints": "cartoon, cute, energetic, side view, facing right",
      "transparent": true,
      "placeholder": "#4169E1",
      "facing": "right",
      "animation_frames": 4,
      "render_mode": "image"
    },
    {
      "id": "player_jump",
      "type": "sprite",
      "width": 60,
      "height": 100,
      "description": "跑酷少年跳跃姿势，双腿蜷起，手臂张开，面朝右侧，充满活力的跳跃动作",
      "style_hints": "cartoon, jumping pose, side view, facing right",
      "transparent": true,
      "placeholder": "#4169E1",
      "facing": "right",
      "render_mode": "image"
    },
    {
      "id": "player_slide",
      "type": "sprite",
      "width": 80,
      "height": 50,
      "description": "跑酷少年滑行姿势，身体压低贴近地面，腿向前伸出，面朝右侧的滑铲动作",
      "style_hints": "cartoon, sliding pose, low profile, side view, facing right",
      "transparent": true,
      "placeholder": "#4169E1",
      "facing": "right",
      "render_mode": "image"
    },
    {
      "id": "obstacle_barrier",
      "type": "sprite",
      "width": 60,
      "height": 50,
      "description": "低矮的红白相间路障/栏杆，卡通圆润造型，需要跳跃越过",
      "style_hints": "cartoon, rounded, red and white stripes, low obstacle",
      "transparent": true,
      "placeholder": "#DC143C",
      "render_mode": "image"
    },
    {
      "id": "obstacle_crate",
      "type": "sprite",
      "width": 50,
      "height": 50,
      "description": "棕色木箱障碍物，卡通风格，圆润边角，有木纹和钉子装饰",
      "style_hints": "cartoon, wooden crate, rounded corners",
      "transparent": true,
      "placeholder": "#8B4513",
      "render_mode": "image"
    },
    {
      "id": "obstacle_sign",
      "type": "sprite",
      "width": 40,
      "height": 100,
      "description": "高高的警示牌/路牌，卡通风格，顶部有横向告示板，需要滑行通过",
      "style_hints": "cartoon, tall sign post, overhead obstacle",
      "transparent": true,
      "placeholder": "#FFD700",
      "render_mode": "image"
    },
    {
      "id": "obstacle_train",
      "type": "sprite",
      "width": 200,
      "height": 120,
      "description": "迎面而来的卡通地铁列车车头，圆润可爱的造型，蓝色车身，前灯亮起，需要跳跃或滑行避开",
      "style_hints": "cartoon, subway train, rounded, blue, approaching",
      "transparent": true,
      "placeholder": "#1E90FF",
      "render_mode": "image"
    },
    {
      "id": "obstacle_pipe",
      "type": "sprite",
      "width": 80,
      "height": 60,
      "description": "横跨上方的绿色通风管道，卡通风格，圆润管状，需要滑行通过",
      "style_hints": "cartoon, green pipe, overhead, rounded",
      "transparent": true,
      "placeholder": "#228B22",
      "render_mode": "image"
    },
    {
      "id": "coin",
      "type": "sprite",
      "width": 30,
      "height": 30,
      "description": "金色闪亮的金币，卡通风格，有星星闪光效果，边缘有高光",
      "style_hints": "cartoon, golden, shiny, sparkle effect",
      "transparent": true,
      "placeholder": "#FFD700",
      "render_mode": "image"
    },
    {
      "id": "icon_coin",
      "type": "icon",
      "width": 32,
      "height": 32,
      "description": "UI用金币图标，与游戏内金币风格一致，用于分数显示",
      "style_hints": "cartoon, golden, UI icon",
      "transparent": true,
      "placeholder": "#FFD700",
      "render_mode": "placeholder"
    },
    {
      "id": "speed_bar",
      "type": "ui",
      "width": 120,
      "height": 20,
      "description": "速度指示条背景，圆角矩形，深灰色底，内部显示橙色渐变的速度条",
      "style_hints": "cartoon, rounded rectangle, progress bar",
      "transparent": false,
      "placeholder": "#333333",
      "render_mode": "placeholder"
    },
    {
      "id": "btn_play",
      "type": "ui",
      "width": 180,
      "height": 60,
      "description": "开始游戏按钮，绿色圆角矩形，白色PLAY文字，有立体阴影效果",
      "style_hints": "cartoon, green, rounded, 3D effect",
      "transparent": false,
      "placeholder": "#32CD32",
      "render_mode": "placeholder"
    },
    {
      "id": "btn_restart",
      "type": "ui",
      "width": 160,
      "height": 50,
      "description": "重新开始按钮，橙色圆角矩形，白色RESTART文字",
      "style_hints": "cartoon, orange, rounded",
      "transparent": false,
      "placeholder": "#FF8C00",
      "render_mode": "placeholder"
    },
    {
      "id": "panel_gameover",
      "type": "ui",
      "width": 400,
      "height": 300,
      "description": "游戏结束面板，白色圆角矩形，有阴影边框，用于显示分数和按钮",
      "style_hints": "cartoon, white, rounded corners, shadow",
      "transparent": false,
      "placeholder": "#FFFFFF",
      "render_mode": "placeholder"
    },
    {
      "id": "panel_menu",
      "type": "ui",
      "width": 500,
      "height": 400,
      "description": "主菜单面板，半透明白色圆角矩形，用于显示游戏标题和开始按钮",
      "style_hints": "cartoon, white, semi-transparent, rounded",
      "transparent": false,
      "placeholder": "#FFFFFFEE",
      "render_mode": "placeholder"
    },
    {
      "id": "title_logo",
      "type": "ui",
      "width": 400,
      "height": 80,
      "description": "游戏标题LOGO，卡通立体字效果，彩色渐变，SUBWAY RUNNER文字",
      "style_hints": "cartoon, 3D text, colorful gradient, playful",
      "transparent": true,
      "placeholder": "#FF6B6B",
      "render_mode": "image"
    },
    {
      "id": "tutorial_jump",
      "type": "ui",
      "width": 120,
      "height": 80,
      "description": "跳跃操作提示图标，显示向上箭头和空格键，卡通风格",
      "style_hints": "cartoon, tutorial icon, up arrow",
      "transparent": true,
      "placeholder": "#4CAF50",
      "render_mode": "placeholder"
    },
    {
      "id": "tutorial_slide",
      "type": "ui",
      "width": 120,
      "height": 80,
      "description": "滑行操作提示图标，显示向下箭头，卡通风格",
      "style_hints": "cartoon, tutorial icon, down arrow",
      "transparent": true,
      "placeholder": "#2196F3",
      "render_mode": "placeholder"
    }
  ],
  "mechanics": {
    "scoring": {
      "initial_score": 0,
      "score_events": [
        { "event": "coin_collect", "points": 10 },
        { "event": "distance_meter", "points": 1 }
      ]
    },
    "speed": {
      "initial_speed": 5,
      "max_speed": 14,
      "acceleration": 0.001,
      "description": "游戏速度随时间逐渐加快，从初始速度递增到最大速度"
    },
    "player": {
      "ground_y": 340,
      "jump_force": 15,
      "gravity": 0.8,
      "slide_duration": 500,
      "run_height": 100,
      "slide_height": 50
    },
    "obstacles": {
      "types": [
        {
          "id": "low_barrier",
          "asset_id": "obstacle_barrier",
          "height_type": "low",
          "y_offset": 0,
          "action_required": "jump",
          "hitbox": { "width": 50, "height": 45 }
        },
        {
          "id": "crate",
          "asset_id": "obstacle_crate",
          "height_type": "low",
          "y_offset": 0,
          "action_required": "jump",
          "hitbox": { "width": 45, "height": 45 }
        },
        {
          "id": "high_sign",
          "asset_id": "obstacle_sign",
          "height_type": "high",
          "y_offset": -50,
          "action_required": "slide",
          "hitbox": { "width": 35, "height": 90 }
        },
        {
          "id": "overhead_pipe",
          "asset_id": "obstacle_pipe",
          "height_type": "high",
          "y_offset": -40,
          "action_required": "slide",
          "hitbox": { "width": 75, "height": 55 }
        },
        {
          "id": "train",
          "asset_id": "obstacle_train",
          "height_type": "full",
          "y_offset": -20,
          "action_required": "any",
          "hitbox": { "width": 180, "height": 100 }
        }
      ],
      "spawn_interval": { "min": 1500, "max": 3000 },
      "min_gap": 300
    },
    "coins": {
      "patterns": [
        {
          "id": "line",
          "description": "一排水平排列的金币",
          "count": 5,
          "formation": "horizontal"
        },
        {
          "id": "arc",
          "description": "弧形排列的金币，模拟跳跃轨迹",
          "count": 7,
          "formation": "arc"
        },
        {
          "id": "diagonal_up",
          "description": "斜向上排列的金币",
          "count": 4,
          "formation": "diagonal_up"
        },
        {
          "id": "low_line",
          "description": "贴近地面的一排金币，引导滑行",
          "count": 4,
          "formation": "low_horizontal"
        }
      ],
      "spawn_chance": 0.6
    }
  },
  "game_flow": {
    "initial_state": "menu",
    "states": [
      {
        "id": "menu",
        "description": "主菜单界面，显示游戏标题、最高分和开始按钮",
        "transitions": [
          { "to": "tutorial", "trigger": "first_play" },
          { "to": "playing", "trigger": "click_play" }
        ]
      },
      {
        "id": "tutorial",
        "description": "首次游戏显示操作教程",
        "transitions": [
          { "to": "playing", "trigger": "click_continue" }
        ]
      },
      {
        "id": "playing",
        "description": "游戏进行中，玩家奔跑、跳跃、滑行，躲避障碍收集金币",
        "transitions": [
          { "to": "paused", "trigger": "press_pause" },
          { "to": "game_over", "trigger": "collision" }
        ]
      },
      {
        "id": "paused",
        "description": "游戏暂停，可继续或返回菜单",
        "transitions": [
          { "to": "playing", "trigger": "press_resume" },
          { "to": "menu", "trigger": "click_menu" }
        ]
      },
      {
        "id": "game_over",
        "description": "游戏结束，显示本次分数、最高分和重新开始按钮",
        "transitions": [
          { "to": "playing", "trigger": "click_restart" },
          { "to": "menu", "trigger": "click_menu" }
        ]
      }
    ]
  },
  "game_data": {
    "high_score_key": "subway_runner_highscore",
    "first_play_key": "subway_runner_first_play"
  },
  "ui": {
    "screens": [
      {
        "id": "screen_menu",
        "type": "menu",
        "elements": [
          {
            "id": "menu_panel",
            "type": "panel",
            "x": 230,
            "y": 70,
            "width": 500,
            "height": 400,
            "asset_id": "panel_menu"
          },
          {
            "id": "game_title",
            "type": "image",
            "x": 280,
            "y": 100,
            "width": 400,
            "height": 80,
            "asset_id": "title_logo"
          },
          {
            "id": "highscore_display",
            "type": "label",
            "x": 380,
            "y": 200,
            "text": "BEST: 0",
            "font_size": 24,
            "color": "#FFD700"
          },
          {
            "id": "btn_start",
            "type": "button",
            "x": 390,
            "y": 280,
            "width": 180,
            "height": 60,
            "text": "PLAY",
            "font_size": 28,
            "color": "#FFFFFF",
            "asset_id": "btn_play",
            "action": "start_game"
          },
          {
            "id": "controls_hint",
            "type": "label",
            "x": 340,
            "y": 380,
            "text": "SPACE/UP: Jump | DOWN: Slide",
            "font_size": 16,
            "color": "#666666"
          }
        ]
      },
      {
        "id": "screen_game",
        "type": "game",
        "elements": [
          {
            "id": "score_display",
            "type": "container",
            "x": 20,
            "y": 20,
            "children": ["score_icon", "score_text"]
          },
          {
            "id": "distance_display",
            "type": "label",
            "x": 400,
            "y": 20,
            "text": "0 m",
            "font_size": 24,
            "color": "#FFFFFF"
          },
          {
            "id": "highscore_hud",
            "type": "label",
            "x": 780,
            "y": 20,
            "text": "BEST: 0",
            "font_size": 20,
            "color": "#FFD700"
          }
        ]
      },
      {
        "id": "screen_tutorial",
        "type": "tutorial",
        "elements": [
          {
            "id": "tutorial_overlay",
            "type": "overlay",
            "x": 0,
            "y": 0,
            "width": 960,
            "height": 540,
            "color": "rgba(0,0,0,0.7)"
          },
          {
            "id": "tutorial_jump_icon",
            "type": "image",
            "x": 280,
            "y": 180,
            "width": 120,
            "height": 80,
            "asset_id": "tutorial_jump"
          },
          {
            "id": "tutorial_jump_text",
            "type": "label",
            "x": 260,
            "y": 270,
            "text": "SPACE / UP to JUMP",
            "font_size": 20,
            "color": "#FFFFFF"
          },
          {
            "id": "tutorial_slide_icon",
            "type": "image",
            "x": 560,
            "y": 180,
            "width": 120,
            "height": 80,
            "asset_id": "tutorial_slide"
          },
          {
            "id": "tutorial_slide_text",
            "type": "label",
            "x": 560,
            "y": 270,
            "text": "DOWN to SLIDE",
            "font_size": 20,
            "color": "#FFFFFF"
          },
          {
            "id": "tutorial_continue",
            "type": "label",
            "x": 380,
            "y": 400,
            "text": "Click anywhere to start",
            "font_size": 24,
            "color": "#4CAF50"
          }
        ]
      },
      {
        "id": "screen_paused",
        "type": "pause",
        "elements": [
          {
            "id": "pause_overlay",
            "type": "overlay",
            "x": 0,
            "y": 0,
            "width": 960,
            "height": 540,
            "color": "rgba(0,0,0,0.5)"
          },
          {
            "id": "pause_text",
            "type": "label",
            "x": 400,
            "y": 220,
            "text": "PAUSED",
            "font_size": 48,
            "color": "#FFFFFF"
          },
          {
            "id": "pause_hint",
            "type": "label",
            "x": 380,
            "y": 300,
            "text": "Press ESC to resume",
            "font_size": 20,
            "color": "#CCCCCC"
          }
        ]
      },
      {
        "id": "screen_gameover",
        "type": "game_over",
        "elements": [
          {
            "id": "gameover_overlay",
            "type": "overlay",
            "x": 0,
            "y": 0,
            "width": 960,
            "height": 540,
            "color": "rgba(0,0,0,0.6)"
          },
          {
            "id": "gameover_panel",
            "type": "panel",
            "x": 280,
            "y": 120,
            "width": 400,
            "height": 300,
            "asset_id": "panel_gameover"
          },
          {
            "id": "gameover_title",
            "type": "label",
            "x": 400,
            "y": 150,
            "text": "GAME OVER",
            "font_size": 36,
            "color": "#E74C3C",
            "text_align": "center"
          },
          {
            "id": "final_score_label",
            "type": "label",
            "x": 380,
            "y": 210,
            "text": "SCORE",
            "font_size": 18,
            "color": "#666666"
          },
          {
            "id": "final_score_value",
            "type": "label",
            "x": 380,
            "y": 240,
            "text": "0",
            "font_size": 42,
            "color": "#333333"
          },
          {
            "id": "best_score_label",
            "type": "label",
            "x": 380,
            "y": 300,
            "text": "BEST: 0",
            "font_size": 20,
            "color": "#FFD700"
          },
          {
            "id": "btn_restart",
            "type": "button",
            "x": 400,
            "y": 360,
            "width": 160,
            "height": 50,
            "text": "RESTART",
            "font_size": 22,
            "color": "#FFFFFF",
            "asset_id": "btn_restart",
            "action": "restart_game"
          }
        ]
      }
    ],
    "fonts": {
      "primary": "Arial, sans-serif",
      "score": "Impact, Arial Black, sans-serif",
      "title": "Comic Sans MS, cursive, sans-serif"
    },
    "colors": {
      "primary": "#4CAF50",
      "secondary": "#2196F3",
      "accent": "#FFD700",
      "text": "#333333",
      "text_light": "#FFFFFF",
      "danger": "#E74C3C",
      "warning": "#FF9800"
    }
  },
  "effects": {
    "coin_collect": {
      "type": "particle",
      "description": "金币收集时的闪光粒子效果",
      "duration": 300,
      "particle_count": 5,
      "color": "#FFD700"
    },
    "jump_dust": {
      "type": "particle",
      "description": "起跳时脚底的灰尘效果",
      "duration": 200,
      "particle_count": 3,
      "color": "#A0A0A0"
    },
    "slide_trail": {
      "type": "trail",
      "description": "滑行时的速度线条效果",
      "duration": 400,
      "color": "#87CEEB"
    },
    "collision_shake": {
      "type": "screen_shake",
      "description": "碰撞时的屏幕震动效果",
      "duration": 300,
      "intensity": 10
    },
    "speed_lines": {
      "type": "background_effect",
      "description": "高速时的速度线条背景效果",
      "trigger_speed": 15,
      "opacity": 0.3
    },
    "new_highscore": {
      "type": "celebration",
      "description": "刷新最高分时的庆祝效果",
      "duration": 1500
    }
  },
  "audio": {
    "audio_style": "cartoon",
    "sfx": [
      {
        "id": "sfx_jump",
        "trigger": "jump",
        "audio_mode": "synthesized",
        "description": "轻快的弹跳音效，类似弹簧弹起的声音，活泼欢快"
      },
      {
        "id": "sfx_land",
        "trigger": "land",
        "audio_mode": "synthesized",
        "description": "轻微的落地声，柔和的着地反馈"
      },
      {
        "id": "sfx_slide",
        "trigger": "slide",
        "audio_mode": "synthesized",
        "description": "滑行摩擦声，短促的滑动音效"
      },
      {
        "id": "sfx_coin",
        "trigger": "coin_collect",
        "audio_mode": "synthesized",
        "description": "清脆悦耳的金币收集音，叮当声，让人感到满足"
      },
      {
        "id": "sfx_collision",
        "trigger": "collision",
        "audio_mode": "synthesized",
        "description": "碰撞音效，砰的一声，配合卡通风格不要太沉重"
      },
      {
        "id": "sfx_gameover",
        "trigger": "game_over",
        "audio_mode": "synthesized",
        "description": "游戏结束音效，下降的音调，略带喜感的失败音"
      },
      {
        "id": "sfx_click",
        "trigger": "click",
        "audio_mode": "synthesized",
        "description": "UI按钮点击音效，清脆的点击反馈"
      },
      {
        "id": "sfx_highscore",
        "trigger": "new_highscore",
        "audio_mode": "synthesized",
        "description": "刷新最高分时的庆祝音效，上升的音调，欢快激励"
      }
    ],
    "bgm": [
      {
        "id": "bgm_gameplay",
        "scene": "gameplay",
        "description": "轻快活泼的电子音乐，节奏感强，适合跑酷游戏的紧张刺激氛围，卡通风格",
        "loop": true,
        "volume": 0.4
      }
    ]
  },
  "game_state_api": {
    "hints": [
      "gameState: 'menu' | 'tutorial' | 'playing' | 'paused' | 'game_over'",
      "score: number (当前分数)",
      "highScore: number (最高分)",
      "distance: number (跑动距离，米)",
      "speed: number (当前速度)",
      "playerState: 'running' | 'jumping' | 'sliding' (玩家状态)",
      "obstacles: Array<Obstacle> (当前屏幕内的障碍物)",
      "coins: Array<Coin> (当前屏幕内的金币)"
    ]
  }
}
